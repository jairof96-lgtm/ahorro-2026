<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mi Reto de Ahorro 365</title>
    <style>
        /* CSS: El diseño */
        body { font-family: sans-serif; text-align: center; background-color: #f0f2f5; }
        #marcador-total { 
            font-size: 24px; font-weight: bold; padding: 20px; 
            position: sticky; top: 0; background: white; z-index: 100; border-bottom: 2px solid #ddd;
        }
        .contenedor-cuadricula { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(100px, 1fr)); 
            gap: 10px; padding: 20px; 
        }
        .dia { 
            border: 2px solid #ccc; border-radius: 8px; padding: 10px; 
            background: white; cursor: pointer; transition: 0.3s;
            display: flex; flex-direction: column; font-size: 12px;
        }
        .dia.completado { background-color: #2ecc71; color: white; border-color: #27ae60; }
        .monto { font-size: 16px; font-weight: bold; margin-top: 5px; }
    </style>
</head>
<body>

    <div id="marcador-total">Total ahorrado: $0.00</div>
    <div class="contenedor-cuadricula" id="grid"></div>

    <script>
        // JavaScript: El cerebro
        const grid = document.getElementById('grid');
        const marcador = document.getElementById('marcador-total');
        
        // Cargar datos guardados o crear una lista vacía
        let diasGuardados = JSON.parse(localStorage.getItem('ahorros365')) || [];

        function actualizarTotal() {
            let total = diasGuardados.reduce((sum, dia) => sum + dia, 0);
            marcador.innerText = `Total ahorrado: $${total}.00`;
        }

        for (let i = 1; i <= 365; i++) {
            const caja = document.createElement('div');
            caja.classList.add('dia');
            
            // Calcular fecha
            let fecha = new Date(2026, 0, i);
            let fechaTexto = fecha.toLocaleDateString('es-ES', { day: '2-digit', month: 'short' });

            caja.innerHTML = `<span>${fechaTexto}</span><span>Día ${i}</span><span class="monto">$${i}</span>`;

            // Si ya estaba guardado, marcar como completado
            if (diasGuardados.includes(i)) { caja.classList.add('completado'); }

            caja.addEventListener('click', () => {
                caja.classList.toggle('completado');
                if (caja.classList.contains('completado')) {
                    diasGuardados.push(i);
                } else {
                    diasGuardados = diasGuardados.filter(d => d !== i);
                }
                // Guardar en la memoria y actualizar total
                localStorage.setItem('ahorros365', JSON.stringify(diasGuardados));
                actualizarTotal();
            });

            grid.appendChild(caja);
        }
        actualizarTotal(); // Calcular al cargar la página
    </script>
</body>
</html>