<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Mi Reto de Ahorro 2026</title>
    <style>
        /* Dise√±o visual */
        body { font-family: sans-serif; text-align: center; background-color: #f0f2f5; margin: 0; }
        
        #cabecera-fija {
            position: sticky; top: 0; background: white; z-index: 100; border-bottom: 2px solid #ddd;
        }

        #marcador-total { font-size: 26px; font-weight: bold; padding: 15px 10px 5px 10px; color: #2c3e50; }

        #estadisticas { 
            display: flex; justify-content: space-around; padding: 10px; 
            background: #fdfdfd; font-size: 14px; color: #555;
        }

        .contenedor-cuadricula { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); 
            gap: 10px; padding: 20px; 
        }

        .dia { 
            border: 2px solid #ccc; border-radius: 8px; padding: 10px; 
            background: white; cursor: pointer; transition: 0.3s;
            display: flex; flex-direction: column; font-size: 12px;
        }

        .dia.completado { background-color: #2ecc71; color: white; border-color: #27ae60; }
        .monto { font-size: 16px; font-weight: bold; margin-top: 5px; }
        .texto-adelantado { color: #27ae60; font-weight: bold; }
        .texto-pendiente { color: #e67e22; font-weight: bold; }
    </style>
</head>
<body>

    <div id="cabecera-fija">
        <div id="marcador-total">Total ahorrado: $0.00</div>
        
        <div id="estadisticas">
            <div>üìÖ D√≠a: <span id="info-dia-hoy">0</span></div>
            <div>‚úÖ Marcados: <span id="info-marcados">0</span></div>
            <div id="mensaje-estado">Cargando...</div>
        </div>
    </div>

    <div class="contenedor-cuadricula" id="grid"></div>

    <script>
        const grid = document.getElementById('grid');
        const marcador = document.getElementById('marcador-total');
        const infoDiaHoy = document.getElementById('info-dia-hoy');
        const infoMarcados = document.getElementById('info-marcados');
        const mensajeEstado = document.getElementById('mensaje-estado');
        
        // Cargar datos guardados
        let diasGuardados = JSON.parse(localStorage.getItem('ahorros365')) || [];

        function actualizarTodo() {
            // 1. Dinero total
            let total = diasGuardados.reduce((sum, dia) => sum + dia, 0);
            marcador.innerText = `Total ahorrado: $${total}.00`;

            // 2. L√≥gica de calendario (D√≠a del a√±o)
            const hoy = new Date();
            const inicio = new Date(2026, 0, 1);
            const diaDelAnio = Math.floor((hoy - inicio) / (1000 * 60 * 60 * 24)) + 1;

            // 3. Comparaci√≥n y Mensaje
            const marcadosTotal = diasGuardados.length;
            const diferencia = diaDelAnio - marcadosTotal;

            infoDiaHoy.innerText = diaDelAnio;
            infoMarcados.innerText = marcadosTotal;

            if (diferencia > 0) {
                mensajeEstado.innerHTML = `<span class="texto-pendiente">‚è≥ Faltan: ${diferencia} d√≠as</span>`;
            } else if (diferencia === 0) {
                mensajeEstado.innerHTML = `<span class="texto-adelantado">‚úÖ ¬°Vas al d√≠a!</span>`;
            } else {
                mensajeEstado.innerHTML = `<span class="texto-adelantado">üöÄ Adelantado: ${Math.abs(diferencia)}</span>`;
            }
        }

        // Crear los 365 cuadros
        for (let i = 1; i <= 365; i++) {
            const caja = document.createElement('div');
            caja.classList.add('dia');
            
            let fecha = new Date(2026, 0, i);
            let fechaTexto = fecha.toLocaleDateString('es-ES', { day: '2-digit', month: 'short' });

            caja.innerHTML = `<span>${fechaTexto}</span><span>D√≠a ${i}</span><span class="monto">$${i}</span>`;

            if (diasGuardados.includes(i)) { caja.classList.add('completado'); }

            caja.addEventListener('click', () => {
                caja.classList.toggle('completado');
                if (caja.classList.contains('completado')) {
                    diasGuardados.push(i);
                } else {
                    diasGuardados = diasGuardados.filter(d => d !== i);
                }
                localStorage.setItem('ahorros365', JSON.stringify(diasGuardados));
                actualizarTodo();
            });

            grid.appendChild(caja);
        }

        actualizarTodo(); 
    </script>
</body>
</html>
